<!doctype html>
<!--
  Minimal Mistakes Jekyll Theme 4.15.2 by Michael Rose
  Copyright 2013-2019 Michael Rose - mademistakes.com | @mmistakes
  Free for personal and commercial use under the MIT license
  https://github.com/mmistakes/minimal-mistakes/blob/master/LICENSE
-->
<html lang="en" class="no-js">
  <head>
    <meta charset="utf-8">

<!-- begin _includes/seo.html --><title>Demographic Characteristics and Access to Public Transit in Greater Vancouver: Analyses and Recommendations - Mark Wang</title>
<meta name="description" content="GIS, Python, transit">



<meta property="og:type" content="article">
<meta property="og:locale" content="en_US">
<meta property="og:site_name" content="Mark Wang">
<meta property="og:title" content="Demographic Characteristics and Access to Public Transit in Greater Vancouver: Analyses and Recommendations">
<meta property="og:url" content="https://zibowangkangyu.github.io/Vancouver_transit4/">


  <meta property="og:description" content="GIS, Python, transit">



  <meta property="og:image" content="https://zibowangkangyu.github.io/images/Vancouver_photo3.png">





  <meta property="article:published_time" content="2020-12-18T00:00:00+00:00">





  

  


<link rel="canonical" href="https://zibowangkangyu.github.io/Vancouver_transit4/">







  <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "Person",
      "name": "Mark Wang's projects",
      "url": "https://zibowangkangyu.github.io",
      "sameAs": null
    }
  </script>







<!-- end _includes/seo.html -->


<link href="/feed.xml" type="application/atom+xml" rel="alternate" title="Mark Wang Feed">

<!-- https://t.co/dKP3o1e -->
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<script>
  document.documentElement.className = document.documentElement.className.replace(/\bno-js\b/g, '') + ' js ';
</script>

<!-- For all browsers -->
<link rel="stylesheet" href="/assets/css/main.css">

<!--[if IE ]>
  <style>
    /* old IE unsupported flexbox fixes */
    .greedy-nav .site-title {
      padding-right: 3em;
    }
    .greedy-nav button {
      position: absolute;
      top: 0;
      right: 0;
      height: 100%;
    }
  </style>
<![endif]-->



    <!-- start custom head snippets -->

<!-- insert favicons. use https://realfavicongenerator.net/ -->

<!-- end custom head snippets -->

  </head>

  <body class="layout--single">

    <!--[if lt IE 9]>
<div class="notice--danger align-center" style="margin: 0;">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience.</div>
<![endif]-->

    

<div class="masthead">
  <div class="masthead__inner-wrap">
    <div class="masthead__menu">
      <nav id="site-nav" class="greedy-nav">
        
        <a class="site-title" href="/">Mark Wang</a>
        <ul class="visible-links"><li class="masthead__menu-item">
              <a href="/about/" >About</a>
            </li></ul>
        
        <button class="greedy-nav__toggle hidden" type="button">
          <span class="visually-hidden">Toggle menu</span>
          <div class="navicon"></div>
        </button>
        <ul class="hidden-links hidden"></ul>
      </nav>
    </div>
  </div>
</div>


    <div class="initial-content">
      
  











<div class="page__hero"
  style=" "
>
  
    <img src="/images/Vancouver_photo3.png" alt="Demographic Characteristics and Access to Public Transit in Greater Vancouver: Analyses and Recommendations" class="page__hero-image">
  
  
</div>





<div id="main" role="main">
  
  <div class="sidebar sticky">
  


<div itemscope itemtype="https://schema.org/Person">

  
    <div class="author__avatar">
      

      
        <img src="/images/Mark_profile.png" alt="Mark Wang" itemprop="image">
      
    </div>
  

  <div class="author__content">
    
      <h3 class="author__name" itemprop="name">Mark Wang</h3>
    
    
      <p class="author__bio" itemprop="description">
        R developer with data science experience in finance, econometrics and consulting. I am proficient in machine learning, time series and geospatial modeling, natural language processing, and applied economics research.
      </p>
    
  </div>

  <div class="author__urls-wrapper">
    <button class="btn btn--inverse">Follow</button>
    <ul class="author__urls social-icons">
      
        <li itemprop="homeLocation" itemscope itemtype="https://schema.org/Place">
          <i class="fas fa-fw fa-map-marker-alt" aria-hidden="true"></i> <span itemprop="name">Toronto, ON</span>
        </li>
      

      
        
          
        
          
        
          
        
          
            <li><a href="https://github.com/ZIBOWANGKANGYU" rel="nofollow noopener noreferrer"><i class="fab fa-fw fa-github" aria-hidden="true"></i> GitHub</a></li>
          
        
          
        
      

      

      
        <li>
          <a href="mailto:kangyumarkwang@gmail.com">
            <meta itemprop="email" content="kangyumarkwang@gmail.com" />
            <i class="fas fa-fw fa-envelope-square" aria-hidden="true"></i> Email
          </a>
        </li>
      

      

      

      

      
        <li>
          <a href="https://www.linkedin.com/in/kmarkwang" itemprop="sameAs" rel="nofollow noopener noreferrer">
            <i class="fab fa-fw fa-linkedin" aria-hidden="true"></i> LinkedIn
          </a>
        </li>
      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      <!--
  <li>
    <a href="http://link-to-whatever-social-network.com/user/" itemprop="sameAs" rel="nofollow noopener noreferrer">
      <i class="fas fa-fw" aria-hidden="true"></i> Custom Social Profile Link
    </a>
  </li>
-->
    </ul>
  </div>
</div>

  
  </div>


  <article class="page" itemscope itemtype="https://schema.org/CreativeWork">
    <meta itemprop="headline" content="Demographic Characteristics and Access to Public Transit in Greater Vancouver: Analyses and Recommendations">
    <meta itemprop="description" content="GIS, Python, transit">
    <meta itemprop="datePublished" content="December 18, 2020">
    

    <div class="page__inner-wrap">
      
        <header>
          <h1 id="page-title" class="page__title" itemprop="headline">Demographic Characteristics and Access to Public Transit in Greater Vancouver: Analyses and Recommendations
</h1>
          
            <p class="page__meta"><i class="far fa-clock" aria-hidden="true"></i> 




  19 minute read
</p>
          
        </header>
      

      <section class="page__content" itemprop="text">
        
        <p>A shorter high-level summary of the project can be found <a href="https://zibowangkangyu.github.io/Vancouver_transit_summary/">here</a>. For an interactive web application with simulation results of priority neighborhoods, see <a href="https://gva-transit-ml.herokuapp.com/">here</a>.</p>

<p>This is part 4 of a series of in-depth posts about this project including</p>

<ul>
  <li><a href="https://zibowangkangyu.github.io/Vancouver_transit1/">data sources</a></li>
  <li><a href="https://zibowangkangyu.github.io/Vancouver_transit2/">key variables</a></li>
  <li><a href="https://zibowangkangyu.github.io/Vancouver_transit3/">machine learning modeling</a>, and</li>
  <li><a href="https://zibowangkangyu.github.io/Vancouver_transit4/">model analyses and recommendations</a>.</li>
</ul>

<p>For the Jupyter Notebook with full analysIs, please see <a href="https://nbviewer.jupyter.org/github/ZIBOWANGKANGYU/Vancouver_transit/blob/master/Report.ipynb">here</a>. The GitHub repo of this analysis is located <a href="https://github.com/ZIBOWANGKANGYU/Vancouver_transit">here</a>.</p>

<h2 id="where-should-transit-infrastructure-development-take-place-in-the-greater-vancouver-area">Where should transit infrastructure development take place in the Greater Vancouver Area?</h2>

<p>In order to understand where Greater Vancouver Area’s public transit agency should invest in infrastructure development, I try to identify places in the region where the same increase in access to transit service will lead to the most increase in transit use. Using the 2016 Canadian census data and the GTFS dataset, I am able to build two machine learning models: LASSO regression and Random Forest. After training our models with the real dataset, I tweaked the input data a little bit to simulate scenarios where access to public transit is marginally increased across the Greater Vancouver Area. It turns out the following areas will benefit the most, as measured by public transportation use:</p>

<ul>
  <li>
    <p>The downtown core: Yaletown and areas around the Waterfront</p>
  </li>
  <li>
    <p>North Vancouver and West Vancouver: neighborhoods close to the Trans-Canadian Highway</p>
  </li>
  <li>
    <p>Richmond: areas on the north and south edges</p>
  </li>
  <li>
    <p>Burnaby: areas further off from the Trans-Canadian Highway</p>
  </li>
  <li>
    <p>Surrey: areas in the southwest and northeast</p>
  </li>
</ul>

<h2 id="model-diagnostics">Model Diagnostics</h2>

<p>Before drawing conclusions from our models, we want to examine whether there is spatial auto-correlation of their prediction errors. We believe that the higher the spatial auto-correlations are, the more unexplained factors, which affect transit use and are spatially clustered, there will be. Therefore, we want to see less, and ideally no spatial auto-correlation.</p>

<p>As shown in the maps below, the spatial-autocorrelation problem does not seem to be severe. Indeed, the Moran’s I is 0.05 for the LASSO model, and 0.18 for the random forest model. However, p-tests show that we do have spatial-autocorrelation problems, at confidence levels of 0.001.</p>

<p><img src="https://zibowangkangyu.github.io/images/Vancouver_transit4/plots/LASSO_error.png" alt="Map: residuals of LASSO" /></p>

<p><img src="https://zibowangkangyu.github.io/images/Vancouver_transit4/plots/rf_error.png" alt="Map: residuals of rf" /></p>

<h2 id="model-analyses-feature-importance">Model analyses: feature importance</h2>

<p>Both LASSO and Random Forest models give easy access to measurements of global feature importance. For the LASSO model, I use the magnificence of coefficients to roughly estimate each variable’s importance. For the Random Forest model, I use the impurity measurement of each variable’s importance, and calculate SHAP (SHapley Additive exPlanations) values.</p>

<p>In addition, the three types of input variables, namely <code class="language-plaintext highlighter-rouge">categorical_features</code>, <code class="language-plaintext highlighter-rouge">numeric_features</code>, and <code class="language-plaintext highlighter-rouge">proportion_features</code> are scaled differently in the preprocessing step. Therefore, I will review the important variables for all three categories separately.</p>

<h3 id="categorical-features">Categorical features</h3>

<h4 id="lasso-model">LASSO model</h4>

<p>The table below shows the five categorical features that mostly strongly predict high proportion of transit use among residents. They are ADA or CCS areas.</p>

<table>
  <thead>
    <tr>
      <th style="text-align: right"> </th>
      <th style="text-align: right">feature</th>
      <th style="text-align: right">coeffs</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: right">148</td>
      <td style="text-align: right">ADAUID_59150117</td>
      <td style="text-align: right">0.097663</td>
    </tr>
    <tr>
      <td style="text-align: right">7</td>
      <td style="text-align: right">CCSUID_5915022</td>
      <td style="text-align: right">0.069961</td>
    </tr>
    <tr>
      <td style="text-align: right">8</td>
      <td style="text-align: right">CCSUID_5915025</td>
      <td style="text-align: right">0.065468</td>
    </tr>
    <tr>
      <td style="text-align: right">138</td>
      <td style="text-align: right">ADAUID_59150107</td>
      <td style="text-align: right">0.053888</td>
    </tr>
    <tr>
      <td style="text-align: right">114</td>
      <td style="text-align: right">ADAUID_59150082</td>
      <td style="text-align: right">0.048754</td>
    </tr>
  </tbody>
</table>

<p><img src="https://zibowangkangyu.github.io/images/Vancouver_transit4/plots/LASSO_top_categorical.png" alt="Map: high transit use categorical LASSO" /></p>

<p>As shown in the map above, areas in the city of Vancouver tend to have high proportions of people using public transit.</p>

<p><img src="https://zibowangkangyu.github.io/images/Vancouver_transit4/plots/LASSO_bottom_categorical.png" alt="Map: low transit use categorical LASSO" /></p>

<p>Somehow unexpectedly, regions that most strongly predict low public transit use are also in the downtown area, distributed along Thurlow Street. They are also in the CCS which predicts high transit use. In other words, these areas may have lower transit use than their immediate neighbors, but not necessarily compared to other ares in GVA.</p>

<h4 id="random-forest-model">Random Forest model</h4>

<p>The table below shows the five categorical features that most strongly impact proportion of transit use among residents. They are CSD or CCS areas. We cannot know the direction of impact from these impurity measures.</p>

<table>
  <thead>
    <tr>
      <th style="text-align: right"> </th>
      <th style="text-align: right">feature</th>
      <th style="text-align: right">impurity_importance</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: right">18</td>
      <td style="text-align: right">CSDUID_5915022</td>
      <td style="text-align: right">0.008434</td>
    </tr>
    <tr>
      <td style="text-align: right">8</td>
      <td style="text-align: right">CCSUID_5915025</td>
      <td style="text-align: right">0.005865</td>
    </tr>
    <tr>
      <td style="text-align: right">2</td>
      <td style="text-align: right">CCSUID_5915001</td>
      <td style="text-align: right">0.004445</td>
    </tr>
    <tr>
      <td style="text-align: right">7</td>
      <td style="text-align: right">CCSUID_5915022</td>
      <td style="text-align: right">0.003664</td>
    </tr>
    <tr>
      <td style="text-align: right">148</td>
      <td style="text-align: right">ADAUID_59150117</td>
      <td style="text-align: right">0.001297</td>
    </tr>
  </tbody>
</table>

<p><img src="https://zibowangkangyu.github.io/images/Vancouver_transit4/plots/rf_imp_categorical.png" alt="Map: transit use categorical rf" /></p>

<p>If I can make a guess, however, areas in the city of Vancouver probably tend to have higher rates of transit use. By contrast, The east part of Langley city and Aldergrove probably have low transit use. We will know more details about each feature’s impact later using SHAP.</p>

<h3 id="numeric-features">Numeric features</h3>

<h4 id="lasso-model-1">LASSO model</h4>

<table>
  <thead>
    <tr>
      <th style="text-align: right"> </th>
      <th style="text-align: right">coeffs</th>
      <th>explanation</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: right">620</td>
      <td style="text-align: right">0.022032</td>
      <td>Immigration - Total Sex / Total - Age at immigration for the immigrant population in private households - 25% sample data / 25 to 44 years</td>
    </tr>
    <tr>
      <td style="text-align: right">711</td>
      <td style="text-align: right">0.021731</td>
      <td>Labour - Total Sex / Participation rate</td>
    </tr>
    <tr>
      <td style="text-align: right">383</td>
      <td style="text-align: right">0.018865</td>
      <td>Households - Both sexes / Total - Persons not in census families in private households - 100% data ; Both sexes</td>
    </tr>
    <tr>
      <td style="text-align: right">682</td>
      <td style="text-align: right">0.016852</td>
      <td>Ethnic Origin - Total Sex / Total - Ethnic origin for the population in private households - 25% sample data / European origins / British Isles origins</td>
    </tr>
    <tr>
      <td style="text-align: right">439</td>
      <td style="text-align: right">0.016713</td>
      <td>Housing - Total Sex / Total -  Owner and tenant households with household total income greater than zero, in non-farm, non-reserve private dwellings by shelter-cost-to-income ratio - 25% sample data / Spending less than 30% of income on shelter costs</td>
    </tr>
  </tbody>
</table>

<p>As shown in the table above, important numeric factors that indicate high transit use include:</p>

<p>(1) Large number of immigrant population who moved to Canada when they were 25 to 44 years old,</p>

<p>(2) High labor participation rate (number of people working as a percentage of total population),</p>

<p>(3) High number of people who do not live in families,</p>

<p>(4) High number of people of British ethnicity, and</p>

<p>(5) High number of people who spend less money on housing as compared to their income.</p>

<table>
  <thead>
    <tr>
      <th style="text-align: right"> </th>
      <th style="text-align: right">coeffs</th>
      <th>explanation</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: right">712</td>
      <td style="text-align: right">-0.016735</td>
      <td>Labour - Total Sex / Employment rate</td>
    </tr>
    <tr>
      <td style="text-align: right">724</td>
      <td style="text-align: right">-0.015868</td>
      <td>Labour - Total Sex / Total labour force aged 15 years and over by class of worker - 25% sample data / All classes of workers / Self-employed</td>
    </tr>
    <tr>
      <td style="text-align: right">790</td>
      <td style="text-align: right">-0.014384</td>
      <td>Journey to Work - Males / Total - Commuting destination for the employed labour force aged 15 years and over in private households with a usual place of work - 25% sample data / Commute within census subdivision (CSD) of residence</td>
    </tr>
    <tr>
      <td style="text-align: right">448</td>
      <td style="text-align: right">-0.013827</td>
      <td>Housing - Total Sex / Total - Owner households in non-farm, non-reserve private dwellings - 25% sample data / Average value of dwellings ($)</td>
    </tr>
    <tr>
      <td style="text-align: right">453</td>
      <td style="text-align: right">-0.013343</td>
      <td>Housing - Total Sex / Total - Tenant households in non-farm, non-reserve private dwellings - 25% sample data / Average monthly shelter costs for rented dwellings ($)</td>
    </tr>
  </tbody>
</table>

<p>As shown in the table above, the following numeric features most strongly predict low transit use:</p>

<p>(1) High employment rate (number of people actually employed as a percentage of people who want to be employed),</p>

<p>(2) Large self-employed population,</p>

<p>(3) Large number of people working in the same CSD,</p>

<p>(4) High average value of dwellings, and</p>

<p>(5) High average housing cost for rented dwellings.</p>

<p>We are also interested in knowing where the two transit access variables are ranked among the numeric features. It turns out that among 462 numeric features, number of services per capita ranks 20, coefficient is 0.0060. However, the number of stops per capita has zero coefficient.</p>

<h4 id="random-forest-model-1">Random Forest model</h4>

<table>
  <thead>
    <tr>
      <th style="text-align: right"> </th>
      <th style="text-align: right">impurity_importance</th>
      <th>explanation</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: right">349</td>
      <td style="text-align: right">0.036776</td>
      <td>Population and dwelling counts / Population density per square kilometre</td>
    </tr>
    <tr>
      <td style="text-align: right">800</td>
      <td style="text-align: right">0.019114</td>
      <td>NBA_services_PC</td>
    </tr>
    <tr>
      <td style="text-align: right">548</td>
      <td style="text-align: right">0.006549</td>
      <td>Income - Total Sex / Total - Income statistics in 2015 for the population aged 15 years and over in private households - 100% data / Number of government transfers recipients aged 15 years and over in private households - 100% data / Median government transfers in 2015 among recipients ($)</td>
    </tr>
    <tr>
      <td style="text-align: right">352</td>
      <td style="text-align: right">0.004274</td>
      <td>Dwelling characteristics / Total - Occupied private dwellings by structural type of dwelling - 100% data / Single-detached house</td>
    </tr>
    <tr>
      <td style="text-align: right">415</td>
      <td style="text-align: right">0.003868</td>
      <td>Housing - Total Sex / Total - Occupied private dwellings by period of construction - 25% sample data / 1960 or before</td>
    </tr>
  </tbody>
</table>

<p>The table above show the important numeric features in our Random Forest model. Population density turns out to be the most important one. Also, much to our pleasant surprise, number of services per capita, the variable that we are interested in, ranks the second.</p>

<p>Other important features include high amounts of government transfer recipients, high number of single-detached house, and very old house dwellings.</p>

<h3 id="proportional-features">Proportional features</h3>

<h4 id="lasso-model-2">LASSO model</h4>

<table>
  <thead>
    <tr>
      <th style="text-align: right"> </th>
      <th style="text-align: right">coeffs</th>
      <th style="text-align: right">Explanation</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: right">1336</td>
      <td style="text-align: right">0.047517</td>
      <td style="text-align: right">Denominator is Labour - Total Sex / Total labour force population aged 15 years and over by occupation - National Occupational Classification (NOC) 2016 - 25% sample data / All occupations; numerator is Labour - Total Sex / Total labour force population aged 15 years and over by occupation - National Occupational Classification (NOC) 2016 - 25% sample data / All occupations / 6 Sales and service occupations.</td>
    </tr>
    <tr>
      <td style="text-align: right">1156</td>
      <td style="text-align: right">0.046837</td>
      <td style="text-align: right">Denominator is Labour - Total Sex / Total - Place of work status for the employed labour force aged 15 years and over in private households - 25% sample data; numerator is Labour - Total Sex / Total - Place of work status for the employed labour force aged 15 years and over in private households - 25% sample data / Worked at usual place.</td>
    </tr>
    <tr>
      <td style="text-align: right">1097</td>
      <td style="text-align: right">0.044393</td>
      <td style="text-align: right">Denominator is Ethnic Origin - Total Sex / Total - Ethnic origin for the population in private households - 25% sample data; numerator is Ethnic Origin - Total Sex / Total - Ethnic origin for the population in private households - 25% sample data / Asian origins / East and Southeast Asian origins.</td>
    </tr>
    <tr>
      <td style="text-align: right">1182</td>
      <td style="text-align: right">0.040103</td>
      <td style="text-align: right">Denominator is Journey to Work - Females / Total - Commuting destination for the employed labour force aged 15 years and over in private households with a usual place of work - 25% sample data; numerator is Journey to Work - Females / Total - Commuting destination for the employed labour force aged 15 years and over in private households with a usual place of work - 25% sample data / Commute to a different census subdivision (CSD) within census division (CD) of residence.</td>
    </tr>
    <tr>
      <td style="text-align: right">821</td>
      <td style="text-align: right">0.037006</td>
      <td style="text-align: right">Denominator is Family characteristics / Total - Couple census families in private households - 100% data; numerator is Family characteristics / Total - Couple census families in private households - 100% data / Couples with children.</td>
    </tr>
  </tbody>
</table>

<p>As shown in the table above, strong predictors for high transit use, among proportion variables, include:</p>

<p>(1) High proportion of people working in sales and service industries,</p>

<p>(2) High proportion of people working at a constant and usual location,</p>

<p>(3) High proportion of people with East and Southeast Asian ethnic origins,</p>

<p>(4) High proportion of people commuting to a different CSD but the same CD for work, and</p>

<p>(5) High proportion of households that have couples with children.</p>

<table>
  <thead>
    <tr>
      <th style="text-align: right"> </th>
      <th style="text-align: right">coeffs</th>
      <th style="text-align: right">explanation</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: right">829</td>
      <td style="text-align: right">-0.046500</td>
      <td style="text-align: right">Denominator is Housing - Total Sex / Total - Private households by tenure - 25% sample data; numerator is Housing - Total Sex / Total - Private households by tenure - 25% sample data / Owner.</td>
    </tr>
    <tr>
      <td style="text-align: right">1055</td>
      <td style="text-align: right">-0.026167</td>
      <td style="text-align: right">Denominator is Immigration - Total Sex / Total - Generation status for the population in private households - 25% sample data; numerator is Immigration - Total Sex / Total - Generation status for the population in private households - 25% sample data / Third generation or more.</td>
    </tr>
    <tr>
      <td style="text-align: right">1289</td>
      <td style="text-align: right">-0.023855</td>
      <td style="text-align: right">Denominator is Immigration - Total Sex / Total - Selected places of birth for the immigrant population in private households - 25% sample data / Asia; numerator is Immigration - Total Sex / Total - Selected places of birth for the immigrant population in private households - 25% sample data / Asia / India.</td>
    </tr>
    <tr>
      <td style="text-align: right">878</td>
      <td style="text-align: right">-0.014456</td>
      <td style="text-align: right">Denominator is Housing - Total Sex / Total - Tenant households in non-farm, non-reserve private dwellings - 25% sample data; numerator is Housing - Total Sex / Total - Tenant households in non-farm, non-reserve private dwellings - 25% sample data / % of tenant households spending 30% or more of its income on shelter costs.</td>
    </tr>
    <tr>
      <td style="text-align: right">1368</td>
      <td style="text-align: right">-0.010210</td>
      <td style="text-align: right">Denominator is Mobility  - Total Sex / Total - Mobility status 5 years ago - 25% sample data / Movers / Migrants; numerator is Mobility  - Total Sex / Total - Mobility status 5 years ago - 25% sample data / Movers / Migrants / Internal migrants.</td>
    </tr>
  </tbody>
</table>

<p>By contrast, strong predictors for low transit use, among proportion variables, include:</p>

<p>(1) High proportion of people who live in a dwelling which they own,</p>

<p>(2) High proportion of households where three or more generations live together,</p>

<p>(3) High number of immigrants who are born in India, as a proportion of all immigrants born in Asia,</p>

<p>(4) High proportion of tenant households spending 30% or more of its income on shelter costs, and</p>

<p>(5) High number of internal migrants as a proportion of all migrants.</p>

<h4 id="random-forest-model-2">Random forest model</h4>

<table>
  <thead>
    <tr>
      <th style="text-align: right"> </th>
      <th style="text-align: right">impurity_importance</th>
      <th>explanation</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: right">813</td>
      <td style="text-align: right">0.281665</td>
      <td>Denominator is Marital Status - Both Sexes / Total - Marital status for the population aged 15 years and over - 100% data ; Both sexes; numerator is Marital Status - Both Sexes / Total - Marital status for the population aged 15 years and over - 100% data ; Both sexes / Married or living common law ; Both sexes.</td>
    </tr>
    <tr>
      <td style="text-align: right">814</td>
      <td style="text-align: right">0.034743</td>
      <td>Denominator is Marital Status - Both Sexes / Total - Marital status for the population aged 15 years and over - 100% data ; Both sexes; numerator is Marital Status - Both Sexes / Total - Marital status for the population aged 15 years and over - 100% data ; Both sexes / Not married and not living common law ; Both sexes.</td>
    </tr>
    <tr>
      <td style="text-align: right">1097</td>
      <td style="text-align: right">0.034705</td>
      <td>Denominator is Ethnic Origin - Total Sex / Total - Ethnic origin for the population in private households - 25% sample data; numerator is Ethnic Origin - Total Sex / Total - Ethnic origin for the population in private households - 25% sample data / Asian origins / East and Southeast Asian origins.</td>
    </tr>
    <tr>
      <td style="text-align: right">958</td>
      <td style="text-align: right">0.030017</td>
      <td>Denominator is Other language spoken regularly at home - Both sexes / Total - Other language(s) spoken regularly at home for the total population excluding institutional residents - 100% data ; Both sexes; numerator is Other language spoken regularly at home - Both sexes / Total - Other language(s) spoken regularly at home for the total population excluding institutional residents - 100% data ; Both sexes / Non-official language ; Both sexes.</td>
    </tr>
    <tr>
      <td style="text-align: right">955</td>
      <td style="text-align: right">0.028454</td>
      <td>Denominator is Other language spoken regularly at home - Both sexes / Total - Other language(s) spoken regularly at home for the total population excluding institutional residents - 100% data ; Both sexes; numerator is Other language spoken regularly at home - Both sexes / Total - Other language(s) spoken regularly at home for the total population excluding institutional residents - 100% data ; Both sexes / None ; Both sexes.</td>
    </tr>
  </tbody>
</table>

<p>In our Random Forest model, marital status of residents have the most impact on use of public transit. Other important proportional features include:</p>

<p>(1) Number of immigrants from East and Southeast Asia as a proportion of all immigrants,</p>

<p>(2) Proportion of residents speaking more than two languages at home, with the second language not being an official language.</p>

<p>(3) Proportion of residents who only speak one language at home.</p>

<h3 id="shap-analyses-on-random-forest-model">SHAP analyses on Random Forest model</h3>

<p>Here, we use the SHapley Additive exPlanations (SHAP) tool to further understand the effects of features in our Random Forest model.
The variable that we are most interested in, of course, is number of services per capita in the neighborhood area <code class="language-plaintext highlighter-rouge">NBA_services_PC</code>. Two takeaways are worth of mentioning here:</p>

<p>(1) The relationship between <code class="language-plaintext highlighter-rouge">NBA_services_PC</code> and transit use is positive, with the only exception of very large <code class="language-plaintext highlighter-rouge">NBA_services_PC</code> values.</p>

<p>(2) Among other variables, <code class="language-plaintext highlighter-rouge">vn34_ultimate_vn33</code> (proportion of married or common-law couples among all residents) has highest frequency of interaction with <code class="language-plaintext highlighter-rouge">NBA_services_PC</code>. The relationship between <code class="language-plaintext highlighter-rouge">NBA_services_PC</code> and transit use seems to be more positive for areas with high proportions of married people.</p>

<p><img src="https://zibowangkangyu.github.io/images/Vancouver_transit4/plots/SHAP_NBA_services.png" alt="Plot: Shap dependency service pc" /></p>

<p>Another variable that we are interested in is <code class="language-plaintext highlighter-rouge">NBA_stops_PC</code>, the number of stops in the neighborhood area. As we can see in the following plot, it also has a positive, albeit weaker relationship with transit use. Also interestingly, there seems to be a strong interaction between <code class="language-plaintext highlighter-rouge">NBA_stops_PC</code> and <code class="language-plaintext highlighter-rouge">vn142_ultimate_vn131</code>, which is the proportion of people who speak an non-official language as their mother tongue. For DAs with more presence of such population, the relationship between transit stops and public transportation use seems stronger.</p>

<p><img src="https://zibowangkangyu.github.io/images/Vancouver_transit4/plots/SHAP_NBA_stops.png" alt="Plot: Shap dependency stops pc" /></p>

<p>To gain an understanding of all key features that impact transit use at the DA level, please see the charts below.</p>

<p><img src="https://zibowangkangyu.github.io/images/Vancouver_transit4/plots/SHAP_top_variables.png" alt="Plot: Shap summary" /></p>

<h3 id="summary">Summary</h3>

<p>We have not figured out where GVA’s public transportation agency should prioritize in terms of service and infrastructure development yet. However, the analyses above provide valuable information about the relationship between demographic characters and transit use in GVA, especially the role of access to public transportation services and stops.</p>

<p>Geographically speaking, areas in and around the downtown core tend have higher public transit use, something hardly surprising given our prior analyses on the spatial distribution of transit services in the area. However, variations within the downtown core should not be overlooked.</p>

<p>In addition to geographical location, factors that impact transit use are diverse, seen across most demographic aspects covered by the census. DA level variables in ethnicity, family structure, housing, immigration, labor and language all make to the top of importance.</p>

<p>Access to transit does seem to affect people’s transit use, with all other variables above taken into consideration. Both our models agree that number of services per capita in a DA’s neighborhood area is a more important feature than the number of stops per capita. Our LASSO model does not even give the number of stops per capita a non-zero coefficient. This seems to suggest that the authority should pour more of their resources into strengthening transit services at existing locations, instead of setting up new stops.</p>

<p>Exactly how important are transit services and stops? In fact, the two models diverge to a certain degree. What we can be confident about for now, however, is that number of transit services per capita is among the 5% most important numeric features, and is related to transit use positively.</p>

<h2 id="policy-recommendations">Policy recommendations</h2>

<p>How should our analyses inform decision makers? In the last section of this project, I will bring back the whole dataset and identify areas that GVA’s transportation agency should pour its resources to. Bearing in mind that the government’s resources are limited and come from tax payers’ money, we should assume that it can only increase access to transit for a limited number of neighborhoods. Therefore, the selected neighborhoods should be places where the same increase in transit access lead to the most <strong>increase in proportion of people using transit</strong>, which is defined as the following:</p>

<p>increase in proportion of people using transit = proportion of people using transit as predicted by the model, after increase in transit access - current proportion of people using transit as predicted by the model</p>

<h3 id="two-scenarios">Two scenarios</h3>

<p>I will specify two scenarios in which access to public transit services increases.</p>

<h4 id="scenario-1">Scenario 1</h4>

<p>(1) I will create a hypothetical dataset (<code class="language-plaintext highlighter-rouge">X_1</code>) where each DA’s <code class="language-plaintext highlighter-rouge">NBA_services_PC</code> increases by a fixed amount (10% of average current NBA_services_PC across all DAs in GVA, or about 1.2 percentage points). I will then identify DAs where transit use rate increases the most, measured by percentage point increase.</p>

<p>The following two maps identify DAs with top 10% percentage point increase in transit use if number of transit services per person increases by about 1.2 in the neighborhood area.</p>

<p><img src="https://zibowangkangyu.github.io/images/Vancouver_transit4/plots/X_1_LASSO.png" alt="Map: LASSO Scenario 1" /></p>

<p><img src="https://zibowangkangyu.github.io/images/Vancouver_transit4/plots/X_1_rf.png" alt="Map: Random Forest Scenario 1" /></p>

<p>Are our predictions of increase in transit use similar between the two models? I have calculated the Pearson correlation coefficient between two sets of predictions, which stands at 0.768. This result is satisfactory.</p>

<h4 id="scenario-2">Scenario 2</h4>

<p>(2) I will create a hypothetical dataset (<code class="language-plaintext highlighter-rouge">X_2</code>) where each DA’s <code class="language-plaintext highlighter-rouge">NBA_services_PC</code> increases by a fixed percentage (10%) of current <code class="language-plaintext highlighter-rouge">NBA_services_PC</code>. I will then identify as a percentage of current transit use rate increases the most, measured by percentage increase.</p>

<p>The following two maps identify DAs with top 10% percentage point increase in transit use if number of transit services per person increases by 10 percent of the current value, in the neighborhood area.</p>

<p><img src="https://zibowangkangyu.github.io/images/Vancouver_transit4/plots/X_2_LASSO.png" alt="Map: LASSO Scenario 2" /></p>

<p><img src="https://zibowangkangyu.github.io/images/Vancouver_transit4/plots/X_2_rf.png" alt="Map: Random Forest Scenario 2" /></p>

<p>The two models’ predictions, under scenario 2, are also quite similar. I have calculated the Pearson correlation coefficient between two sets of predictions, which stands at 0.767.</p>

<h2 id="impact-evaluation">Impact evaluation</h2>

<p>If the public transportation authority of GVA does indeed increase service in the key areas, how much increase of transit use can we expect? A more fundamental question is that, although increase in access to public transit does have a positive impact on use of transit in commuting, how many DAs in GVA should be prioritized? The following analyses show that the law of diminishing returns hold here, and the more DAs we target, the less increase in transit use we will see. However, as compared to the baseline scenario where we increase transit services in randomly selected DAs, a policy based on our models still results in far more increase in overall transit use in GVA overall.</p>

<p>I want to point out that here, only the Random Forest model, instead of the LASSO model, is used in the calculations. This is because LASSO is essentially a linear model, and a fixed increase in access to transit will result in the same increase in transit usage, which is not useful in selecting DAs to prioritize.</p>

<h3 id="scenario-1-1">Scenario 1</h3>

<p>The following charts show that as compared to the baseline, a policy to increase transit access informed by our model does result in more increase in public transportation use. For example, if we target DAs with a combined population of 100,000 and increase their number of transit services per capita by 1.2, we are expected to see 0.7 percentage point increase in proportion of people using transit, which translates into 700 more people using transit. By contrast, if we randomly select DAs also with a combined population of 100,000, we are only expected to see 100 more people using transit. If we target DAs with a combined population of 400,000 and and increase their number of transit services per capita by 1.2, we are expected to see 0.4 percentage point increase in proportion of people using transit, which translates into 1600 more people using transit. By contrast, if we randomly select DAs also with a combined population of 400,000, we are only expected to see 400 more people using transit.</p>

<p><img src="https://zibowangkangyu.github.io/images/Vancouver_transit4/plots/X_1_benefited_population_compare.png" alt="Chart: Scenario 1 Benefited Population Compare" /></p>

<p><img src="https://zibowangkangyu.github.io/images/Vancouver_transit4/plots/X_1_percentage_point_increase_compare.png" alt="Chart: Scenario 1 PC Point Compare" /></p>

<p>The following two charts put the impact of the policy specified above into context. For example, if we target DAs with a combined population of 200,000, they in average have 12% people commutting using public transit at present. After the policy intervention, the percentage of people using public transit will increase by 0.55 percentage points, or about 5%.</p>

<p><img src="https://zibowangkangyu.github.io/images/Vancouver_transit4/plots/X_1_current_percentage_compare.png" alt="Chart: Scenario 1 Current PC Compare" /></p>

<p><img src="https://zibowangkangyu.github.io/images/Vancouver_transit4/plots/X_1_percent_increase_compare.png" alt="Chart: Scenario 1 PC Increase Compare" /></p>

<h3 id="scenario-2-1">Scenario 2</h3>

<p>Simulation results for scenario 2 are similar, as shown below.</p>

<p><img src="https://zibowangkangyu.github.io/images/Vancouver_transit4/plots/X_2_benefited_population_compare.png" alt="Chart: Scenario 2 Benefited Population Compare" /></p>

<p><img src="https://zibowangkangyu.github.io/images/Vancouver_transit4/plots/X_2_percentage_point_increase_compare.png" alt="Chart: Scenario 2 PC Point Compare" /></p>

<p><img src="https://zibowangkangyu.github.io/images/Vancouver_transit4/plots/X_2_current_percentage_compare.png" alt="Chart: Scenario 2 Current PC Compare" /></p>

<p><img src="https://zibowangkangyu.github.io/images/Vancouver_transit4/plots/X_2_percent_increase_compare.png" alt="Chart: Scenario 2 PC Increase Compare" /></p>

<h2 id="discussion">Discussion</h2>

<p>These results should be taken with a grain of salt.</p>

<p>It is unrealistic to expect that some infrastructure development will only increase service in selected DAs while keeping service in other DAs constant. This point has two implications. On the one hand, even the transit authority focuses solely on increasing service in identified areas, other areas across GVA will benefit. On the other hand, a “increasing service by 10% in 10% of all DAs” scenario does not mean that the system’s variable cost will increase by 1% (10% * 10%). Most likely, the real cost increase will be significantly bigger.</p>

<p>In addition, our model only takes into account a limited number of factors, and there are certainly importrant variables which would help to build our predictive models, but we do not have data for. For example, we do not know whether public transportation has been in a DA long enough for people there to have a habit of using transit.</p>

<p>Lastly, there is this fundamental problem of applying inference models to prediction. Without randomized trials, which seems extremely expensive in our case, we cannot know for sure whether the seemlying strong relationship between access to transit service and transit use is causal. Therefore, when we pour resourse into these areas, the outcome may not be as strong as what we might expect.</p>

        
      </section>

      <footer class="page__meta">
        
        
  


  
  
  

  <p class="page__taxonomy">
    <strong><i class="fas fa-fw fa-tags" aria-hidden="true"></i> Tags: </strong>
    <span itemprop="keywords">
    
      
      
      <a href="/tags/#gis" class="page__taxonomy-item" rel="tag">GIS</a><span class="sep">, </span>
    
      
      
      <a href="/tags/#python" class="page__taxonomy-item" rel="tag">python</a><span class="sep">, </span>
    
      
      
      <a href="/tags/#transit" class="page__taxonomy-item" rel="tag">transit</a>
    
    </span>
  </p>




        
          <p class="page__date"><strong><i class="fas fa-fw fa-calendar-alt" aria-hidden="true"></i> Updated:</strong> <time datetime="2020-12-18T00:00:00+00:00">December 18, 2020</time></p>
        
      </footer>

      <section class="page__share">
  
    <h4 class="page__share-title">Share on</h4>
  

  <a href="https://twitter.com/intent/tweet?text=Demographic+Characteristics+and+Access+to+Public+Transit+in+Greater+Vancouver%3A+Analyses+and+Recommendations%20https%3A%2F%2Fzibowangkangyu.github.io%2FVancouver_transit4%2F" class="btn btn--twitter" onclick="window.open(this.href, 'window', 'left=20,top=20,width=500,height=500,toolbar=1,resizable=0'); return false;" title="Share on Twitter"><i class="fab fa-fw fa-twitter" aria-hidden="true"></i><span> Twitter</span></a>

  <a href="https://www.facebook.com/sharer/sharer.php?u=https%3A%2F%2Fzibowangkangyu.github.io%2FVancouver_transit4%2F" class="btn btn--facebook" onclick="window.open(this.href, 'window', 'left=20,top=20,width=500,height=500,toolbar=1,resizable=0'); return false;" title="Share on Facebook"><i class="fab fa-fw fa-facebook" aria-hidden="true"></i><span> Facebook</span></a>

  <a href="https://www.linkedin.com/shareArticle?mini=true&url=https%3A%2F%2Fzibowangkangyu.github.io%2FVancouver_transit4%2F" class="btn btn--linkedin" onclick="window.open(this.href, 'window', 'left=20,top=20,width=500,height=500,toolbar=1,resizable=0'); return false;" title="Share on LinkedIn"><i class="fab fa-fw fa-linkedin" aria-hidden="true"></i><span> LinkedIn</span></a>
</section>


      
  <nav class="pagination">
    
      <a href="/Vancouver_transit3/" class="pagination--pager" title="Demographic Characters and Access to Public Transit in Greater Vancouver: Machine Learning Modeling
">Previous</a>
    
    
      <a href="/Vancouver_transit_summary/" class="pagination--pager" title="Public Transportation in Vancouver: Suggestions from Machine Learning Models
">Next</a>
    
  </nav>

    </div>

    
  </article>

  
  
    <div class="page__related">
      <h4 class="page__related-title">You may also enjoy</h4>
      <div class="grid__wrapper">
        
          



<div class="grid__item">
  <article class="archive__item" itemscope itemtype="https://schema.org/CreativeWork">
    
    <h2 class="archive__item-title" itemprop="headline">
      
        <a href="/copilot_topic/" rel="permalink">GitHub Copilot seem hesitant? Could be AI safety and fairness measures!
</a>
      
    </h2>
    
      <p class="page__meta"><i class="far fa-clock" aria-hidden="true"></i> 




  4 minute read
</p>
    
    <p class="archive__item-excerpt" itemprop="description">artificial intelligence, large language models, safety and security
</p>
  </article>
</div>

        
          



<div class="grid__item">
  <article class="archive__item" itemscope itemtype="https://schema.org/CreativeWork">
    
    <h2 class="archive__item-title" itemprop="headline">
      
        <a href="/Evaluation_metrics/" rel="permalink">Evaluation Metrics for Binary Classification in Machine Learning: When Accuracy Score Is Not Enough
</a>
      
    </h2>
    
      <p class="page__meta"><i class="far fa-clock" aria-hidden="true"></i> 




  4 minute read
</p>
    
    <p class="archive__item-excerpt" itemprop="description">machine learning, binary classification
</p>
  </article>
</div>

        
          



<div class="grid__item">
  <article class="archive__item" itemscope itemtype="https://schema.org/CreativeWork">
    
    <h2 class="archive__item-title" itemprop="headline">
      
        <a href="/Infodemic/" rel="permalink">Combating America’s Other Infodemic
</a>
      
    </h2>
    
      <p class="page__meta"><i class="far fa-clock" aria-hidden="true"></i> 




  8 minute read
</p>
    
    <p class="archive__item-excerpt" itemprop="description">python, regressions, COVID-19
</p>
  </article>
</div>

        
          



<div class="grid__item">
  <article class="archive__item" itemscope itemtype="https://schema.org/CreativeWork">
    
    <h2 class="archive__item-title" itemprop="headline">
      
        <a href="/Vancouver_transit_summary/" rel="permalink">Public Transportation in Vancouver: Suggestions from Machine Learning Models
</a>
      
    </h2>
    
      <p class="page__meta"><i class="far fa-clock" aria-hidden="true"></i> 




  1 minute read
</p>
    
    <p class="archive__item-excerpt" itemprop="description">GIS, Python, transit
</p>
  </article>
</div>

        
      </div>
    </div>
  
  
</div>

    </div>

    

    <div class="page__footer">
      <footer>
        <!-- start custom footer snippets -->

<!-- end custom footer snippets -->
        <div class="page__footer-follow">
  <ul class="social-icons">
    
      <li><strong>Follow:</strong></li>
    

    
      
        
      
        
      
        
      
        
      
        
      
        
      
    

    <li><a href="/feed.xml"><i class="fas fa-fw fa-rss-square" aria-hidden="true"></i> Feed</a></li>
  </ul>
</div>

<div class="page__footer-copyright">&copy; 2024 Mark Wang's projects. Powered by <a href="https://jekyllrb.com" rel="nofollow">Jekyll</a> &amp; <a href="https://mademistakes.com/work/minimal-mistakes-jekyll-theme/" rel="nofollow">Minimal Mistakes</a>.</div>

      </footer>
    </div>

    
<script src="/assets/js/main.min.js"></script>
<script defer src="https://use.fontawesome.com/releases/v5.7.1/js/all.js"
  integrity="sha384-eVEQC9zshBn0rFj4+TU78eNA19HMNigMviK/PU/FFjLXqa/GKPgX58rvt5Z8PLs7" crossorigin="anonymous"></script>






<script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
<script id="MathJax-script" defer src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js">
</script>

  </body>
</html>
